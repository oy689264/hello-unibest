import{d as e,g as t,r as a,o as l,b as s,c as i,w as o,e as n,n as r,u as d,f as u,h as m,i as c,F as f,x as p,y,t as x,z as h,A as b,s as g,j as w,m as _,v as k,k as v,_ as M}from"./index-f33fdfc7.js";const j=M(e({__name:"open",setup(e){const{safeAreaInsets:M}=t(),j=a(!1),C=a(!1),D=a(!1),T=a({id:0,name:"",image:"",rarity:""}),z=[{id:1,name:"紫悦",image:"https://picsum.photos/200/200?random=31",rarity:"普通",probability:30},{id:2,name:"云宝黛西",image:"https://picsum.photos/200/200?random=32",rarity:"稀有",probability:25},{id:3,name:"苹果嘉儿",image:"https://picsum.photos/200/200?random=33",rarity:"普通",probability:25},{id:4,name:"柔柔",image:"https://picsum.photos/200/200?random=34",rarity:"稀有",probability:15},{id:5,name:"珍奇",image:"https://picsum.photos/200/200?random=35",rarity:"超稀有",probability:4},{id:6,name:"隐藏款",image:"https://picsum.photos/200/200?random=36",rarity:"隐藏",probability:1}],A=()=>{h()},I=()=>{j.value=!0,D.value=!0,b(),setTimeout((()=>{D.value=!1,T.value=(()=>{const e=100*Math.random();let t=0;for(const a of z)if(t+=a.probability,e<=t)return a;return z[0]})(),j.value=!1,C.value=!0,b()}),2e3)},F=()=>{g({title:"已加入收藏",icon:"success"}),setTimeout((()=>{h()}),1500)},q=()=>{j.value=!1,C.value=!1,D.value=!1,T.value={id:0,name:"",image:"",rarity:""}};return l((e=>{null==e||e.id})),(e,t)=>{const a=w,l=_,h=k,b=v("layout-default-uni");return s(),i(b,null,{default:o((()=>[n(a,{class:"bg-gradient-to-b from-purple-600 to-indigo-800 min-h-screen flex flex-col items-center justify-center relative overflow-hidden"},{default:o((()=>{var e;return[n(a,{class:"fixed top-0 left-0 right-0 flex items-center justify-between px-4 py-2 text-white z-10",style:r({paddingTop:(null==(e=d(M))?void 0:e.top)+10+"px"})},{default:o((()=>[n(a,{class:"i-carbon-arrow-left text-xl",onClick:A}),n(a,{class:"text-lg font-bold"},{default:o((()=>[u("开启盲盒")])),_:1}),n(a,{class:"w-6"})])),_:1},8,["style"]),n(a,{class:"absolute inset-0 overflow-hidden"},{default:o((()=>[(s(),m(f,null,c(20,(e=>n(a,{key:e,class:"absolute w-2 h-2 bg-white rounded-full opacity-20 animate-pulse",style:r({left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:2*Math.random()+"s"})},null,8,["style"]))),64))])),_:1}),n(a,{class:"flex flex-col items-center justify-center flex-1 px-8"},{default:o((()=>[n(a,{class:p(["relative mb-8 transition-all duration-500",{"animate-bounce":d(D),"scale-110":d(C)}])},{default:o((()=>[d(C)?(s(),i(a,{key:1,class:"w-48 h-48 rounded-2xl bg-white shadow-2xl flex items-center justify-center animate-fade-in"},{default:o((()=>[n(l,{src:d(T).image,class:"w-40 h-40 rounded-xl"},null,8,["src"])])),_:1})):(s(),i(l,{key:0,src:"https://picsum.photos/200/200?random=box",class:p(["w-48 h-48 rounded-2xl shadow-2xl",{"animate-pulse":d(D)}])},null,8,["class"])),d(C)?(s(),i(a,{key:2,class:"absolute inset-0 rounded-2xl bg-gradient-to-r from-yellow-400 to-orange-500 opacity-30 animate-ping"})):y("",!0)])),_:1},8,["class"]),n(a,{class:"text-center mb-8"},{default:o((()=>[d(j)||d(C)?y("",!0):(s(),i(a,{key:0,class:"text-white text-xl font-bold mb-2"},{default:o((()=>[u(" 准备好了吗？ ")])),_:1})),d(j)||d(C)?y("",!0):(s(),i(a,{key:1,class:"text-white text-sm opacity-80"},{default:o((()=>[u(" 点击下方按钮开启你的盲盒 ")])),_:1})),d(j)?(s(),i(a,{key:2,class:"text-white text-xl font-bold mb-2 animate-pulse"},{default:o((()=>[u(" 正在开启中... ")])),_:1})):y("",!0),d(C)?(s(),i(a,{key:3,class:"text-white text-2xl font-bold mb-2 animate-fade-in"},{default:o((()=>[u(" 恭喜获得！ ")])),_:1})):y("",!0),d(C)?(s(),i(a,{key:4,class:"text-white text-lg animate-fade-in"},{default:o((()=>[u(x(d(T).name),1)])),_:1})):y("",!0),d(C)?(s(),i(a,{key:5,class:"text-yellow-300 text-sm mt-1 animate-fade-in"},{default:o((()=>[u(" 稀有度："+x(d(T).rarity),1)])),_:1})):y("",!0)])),_:1}),n(a,{class:"w-full max-w-xs"},{default:o((()=>[d(j)||d(C)?y("",!0):(s(),i(h,{key:0,class:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-4 rounded-2xl text-lg font-bold shadow-lg transform transition-all duration-200 active:scale-95",onClick:I},{default:o((()=>[u(" 开启盲盒 ")])),_:1})),d(C)?(s(),i(a,{key:1,class:"space-y-3"},{default:o((()=>[n(h,{class:"w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-3 rounded-xl font-medium",onClick:F},{default:o((()=>[u(" 加入收藏 ")])),_:1}),n(h,{class:"w-full bg-white text-gray-700 py-3 rounded-xl font-medium",onClick:q},{default:o((()=>[u(" 再开一个 ")])),_:1})])),_:1})):y("",!0)])),_:1})])),_:1}),d(C)?(s(),i(a,{key:0,class:"fixed inset-0 pointer-events-none"},{default:o((()=>[(s(),m(f,null,c(30,(e=>n(a,{key:e,class:"absolute w-1 h-1 bg-yellow-400 rounded-full animate-bounce",style:r({left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:1*Math.random()+"s",animationDuration:2*Math.random()+1+"s"})},null,8,["style"]))),64))])),_:1})):y("",!0)]})),_:1})])),_:1})}}}),[["__scopeId","data-v-a3e9121d"]]);export{j as default};
